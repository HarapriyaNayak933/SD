<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Technical Quiz</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background: #0f172a;
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }

    header {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 20px;
    }

    header img {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      object-fit: cover;
    }

    header h1 {
      font-size: 1.5rem;
      color: white;
    }

    .quiz-container {
      background: #1e293b;
      padding: 20px;
      border-radius: 15px;
      width: 100%;
      max-width: 700px;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .question {
      font-size: 1.2rem;
      text-align: center;
    }

    .code-editor {
      margin-top: 10px;
    }

    textarea {
      width: 100%;
      height: 150px;
      padding: 10px;
      font-family: monospace;
      font-size: 1rem;
      background-color: #0f172a;
      color: white;
      border: 1px solid #334155;
      border-radius: 10px;
      resize: vertical;
    }

    iframe {
      background-color: white;
      width: 100%;
      height: 150px;
      margin-top: 10px;
      border-radius: 10px;
      border: none;
    }

    .btn {
      background: #2563eb;
      padding: 10px 20px;
      border: none;
      color: white;
      border-radius: 10px;
      cursor: pointer;
      font-size: 1rem;
      align-self: flex-end;
    }

    .btn:hover {
      background: #1d4ed8;
    }

    .timer {
      font-size: 1.2rem;
      text-align: right;
    }

    .thank-you {
      text-align: center;
      font-size: 1.4rem;
      display: none;
    }

    @media (max-width: 768px) {
      .quiz-container {
        padding: 15px;
      }

      textarea {
        height: 120px;
      }
    }
  </style>
</head>
<body>
  <header>
    <img src="WhatsApp Image 2025-07-18 at 18.38.39_2f122030.jpg" alt="Logo" />
    <h1>Technical Department</h1>
  </header>

  <div class="timer" id="timer">Time Left: 10:00</div>

  <div class="quiz-container" id="quiz-box"></div>

  <div class="thank-you" id="thank-you">Thank you for the test!</div>

  <script>
    const questions = [
      { question: "Write a Java program that prints numbers from 1 to 5 using a for loop.", type: "code", answer: "for(int i=1;i<=5;i++){System.out.println(i);}" },
      { question: "What will be the output of this Java code?\nint x = 5;\nSystem.out.println(++x + x++);", type: "code", answer: "12" },
      { question: "Write a program in Java to reverse a string.", type: "code", answer: "new StringBuilder(str).reverse().toString()" },
      { question: "What will be the output of the code?\nString a = \"Hello\";\nString b = \"World\";\nSystem.out.println(a.concat(b));", type: "code", answer: "HelloWorld" },
      { question: "Write Java code to swap two numbers without using a third variable.", type: "code", answer: "a=a+b;b=a-b;a=a-b;" },
      { question: "Write a Java program to check if a number is prime.", type: "code", answer: "for(int i=2;i<=n/2;i++){if(n%i==0)return false;}return true;" },
      { question: "Write a Java code to find factorial using recursion.", type: "code", answer: "if(n==0)return 1;elsereturn n*fact(n-1);" },
      { question: "What is the output?\nint[] arr = {1, 2, 3};\nSystem.out.println(arr[1]);", type: "code", answer: "2" },
      { question: "Write Java code to print Fibonacci series up to n terms.", type: "code", answer: "for(int i=0;i<n;i++){int temp=a;a=b;b=temp+b;}" },
      { question: "What is the output?\nSystem.out.println(10 + 20 + \"30\" + 40);", type: "code", answer: "303040" },
      { question: "Write a Java code to check palindrome string.", type: "code", answer: "str.equals(new StringBuilder(str).reverse().toString())" },
      { question: "What will this print?\nSystem.out.println('A' + 1);", type: "code", answer: "66" },
      { question: "Write Java code to sort an array using bubble sort.", type: "code", answer: "for(int i=0;i<n-1;i++)for(int j=0;j<n-i-1;j++)if(a[j]>a[j+1])swap;" },
      { question: "What is output?\nint x = 10;\nint y = 5;\nSystem.out.println(x > y ? x : y);", type: "code", answer: "10" },
      { question: "Write Java code to find GCD of two numbers.", type: "code", answer: "while(b!=0){int t=b;b=a%b;a=t;}return a;" },
      { question: "Write Java code to find LCM of two numbers.", type: "code", answer: "lcm=(a*b)/gcd(a,b);" },
      { question: "Write code for linear search in Java.", type: "code", answer: "for(int i=0;i<n;i++){if(arr[i]==x)return i;}" },
      { question: "What will be output?\nString s=null;\nSystem.out.println(s + 1);", type: "code", answer: "null1" },
      { question: "Write Java code to remove duplicate characters from a string.", type: "code", answer: "LinkedHashSet<Character> set = new LinkedHashSet<>();" },
      { question: "Write Java code to count vowels in a string.", type: "code", answer: "for(char c: str.toCharArray())if('aeiouAEIOU'.indexOf(c)!=-1)count++;" },
    ];

    let currentIndex = 0;
    let score = 0;
    const totalTime = 10 * 60;
    let timeLeft = totalTime;
    let timerInterval;

    const quizBox = document.getElementById('quiz-box');
    const timerDisplay = document.getElementById('timer');
    const thankYou = document.getElementById('thank-you');

    function loadQuestion() {
      if (currentIndex >= questions.length) {
        quizBox.style.display = 'none';
        thankYou.innerHTML = `Thank you for the test!<br/>Your score is ${score}/${questions.length}`;
        thankYou.style.display = 'block';
        clearInterval(timerInterval);
        return;
      }

      const q = questions[currentIndex];
      quizBox.innerHTML = `
        <div class="question">Q${currentIndex + 1}: ${q.question.replace(/\n/g, '<br/>')}</div>
        ${q.type === "code" ? `
          <div class="code-editor">
            <textarea id="code-input" placeholder="Write your code here..."></textarea>
            <button class="btn" onclick="runCode()">Run Code</button>
            <iframe id="output-frame"></iframe>
            <button class="btn" onclick="nextQuestion()">Next</button>
          </div>
        ` : ''}
      `;
    }

    function runCode() {
      const code = document.getElementById("code-input").value;
      const iframe = document.getElementById("output-frame");
      const doc = iframe.contentDocument || iframe.contentWindow.document;
      doc.open();
      doc.write(`<script>try { ${code} } catch(e) { document.body.innerText = 'Error: ' + e.message; }<\/script>`);
      doc.close();
    }

    function nextQuestion() {
      const userCode = document.getElementById("code-input").value;
      const correctAnswer = questions[currentIndex].answer.replace(/\s+/g, '');
      const normalizedCode = userCode.replace(/\s+/g, '');
      if (normalizedCode.includes(correctAnswer)) {
        score++;
      }

      currentIndex++;
      localStorage.setItem("quizIndex", currentIndex);
      loadQuestion();
    }

    function startTimer() {
      timerInterval = setInterval(() => {
        if (timeLeft <= 0) {
          clearInterval(timerInterval);
          quizBox.style.display = 'none';
          thankYou.innerHTML = `Thank you for the test!<br/>Your score is ${score}/${questions.length}`;
          thankYou.style.display = 'block';
        } else {
          const minutes = Math.floor(timeLeft / 60);
          const seconds = timeLeft % 60;
          timerDisplay.innerText = `Time Left: ${minutes}:${seconds < 10 ? '0' + seconds : seconds}`;
          timeLeft--;
        }
      }, 1000);
    }

    window.onload = function () {
      const savedIndex = parseInt(localStorage.getItem("quizIndex"));
      if (!isNaN(savedIndex) && savedIndex < questions.length) {
        currentIndex = savedIndex;
      }
      loadQuestion();
      startTimer();
    }
  </script>
</body>
</html>
